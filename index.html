<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PapadSale • Order & Checkout</title>
  <meta name="theme-color" content="#0bb07b" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+Gujarati:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="./assets/favicon.png">
  <style>
    :root{--ink:#0f172a;--muted:#6b7280;--line:#e5e7eb;--surface:#ffffff;--bg:#f8fafc;--brand:#0bb07b;--brand2:#10b981;--warn:#f59e0b}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Gujarati",sans-serif}

    header{position:sticky;top:0;background:#ffffffbd;backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--line);z-index:20}
    .bar{max-width:980px;margin:auto;display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:56px;height:56px;border-radius:999px;background:radial-gradient(circle at 30% 30%,#ffedd5,#ffedd5 40%,#fff 41%),linear-gradient(135deg,#ff7a18,#ffb84d);box-shadow:0 4px 10px rgba(255,122,24,.35)}
    .brand h1{font-size:18px;margin:0;font-weight:800}
    .nav a{font-weight:700;color:#0f172a;text-decoration:none;padding:8px 10px;border-radius:10px}
    .nav a:hover{background:#f1f5f9}
    .cta-mini{display:flex;gap:8px}
    .btn{border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
    .btn.wa{background:#25d366;color:#fff}

    main{max-width:980px;margin:18px auto;padding:0 16px}

    .card{background:var(--surface);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 30px rgba(2,8,23,.06)}
    .card.hi{border-radius:18px}
    .card .hd{display:flex;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px dashed var(--line)}
    .card .hd h2{margin:0;font-size:18px;font-weight:800}

    .stack{display:grid;gap:14px}
    .sum{padding:10px 16px}
    .row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed var(--line)}
    .row:last-child{border-bottom:0}
    .total{font-weight:800}

    form{padding:14px 16px}
    label{display:block;font-size:13px;font-weight:700;color:#334155;margin-bottom:6px}
    input,textarea,select{width:100%;padding:12px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;font:inherit;outline:none;transition:border-color .15s, box-shadow .15s;height:44px}
    textarea{min-height:84px;resize:vertical}
    input::placeholder,textarea::placeholder{color:#94a3b8}
    input:focus,textarea:focus,select:focus{border-color:#a7f3d0;box-shadow:0 0 0 4px rgba(16,185,129,.18)}
    .fg{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:640px){.fg{grid-template-columns:1fr}}

    .call{background:#ecfdf5;border:1px solid #a7f3d0;color:#065f46;border-radius:12px;padding:12px 14px;margin-top:6px}
    .call ul{margin:8px 0 0 16px}

    .cta{display:flex;justify-content:flex-end;padding:12px 16px;border-top:1px dashed var(--line)}
    .btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#fff;box-shadow:0 5px 16px rgba(16,185,129,.32)}
    .btn.primary:hover{filter:brightness(.98)}

    footer{color:var(--muted);text-align:center;padding:24px 0}

    .modal{position:fixed;inset:0;background:rgba(2,8,23,.5);display:none;align-items:center;justify-content:center;z-index:50}
    .modal.show{display:flex}
    .mc{background:#fff;border-radius:18px;padding:22px 20px;max-width:520px;text-align:center;box-shadow:0 30px 50px rgba(2,8,23,.35)}
    .tick{width:68px;height:68px;margin:0 auto 8px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,#22c55e,#0ea5e9);color:#fff;font-size:34px}

    /* Tabs (product + weight) */
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid var(--line);background:#fff;border-radius:999px;padding:8px 14px;font-weight:800;cursor:pointer}
    .tab[aria-selected="true"]{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#fff;border-color:transparent;box-shadow:0 6px 16px rgba(16,185,129,.25)}
    .subtabs{display:flex;gap:8px;margin-top:10px}
    .pill{border:1px solid var(--line);border-radius:12px;padding:8px 12px;background:#fff;font-weight:700;cursor:pointer}
    .pill[aria-selected="true"]{background:#ecfdf5;border-color:#a7f3d0;color:#065f46}
    .qty{display:flex;align-items:center;gap:8px;margin-top:10px}
    .qty button{width:36px;height:36px;border-radius:10px;border:1px solid var(--line);background:#fff;font-weight:900}
    .priceShow{font-weight:900;color:#0f172a;margin-left:auto}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">
        <img src="./assets/logo.png" alt="PapadSale logo" class="logo" style="object-fit:cover;">
        <h1>PapadSale <span style="font-weight:600;color:#64748b">• Authentic Gujarati Snacks</span></h1>
      </div>
      <nav class="nav"><a href="#shop">Home</a><a href="#products">Products</a><a href="#about">About</a><a href="#contact">Contact</a></nav>
      <div class="cta-mini"><a class="btn wa" href="https://wa.me/919978113276" target="_blank" rel="noopener">Contact</a></div>
    </div>
  </header>

  <main>
    <div class="card hi">
      <div class="hd"><h2>Order Details / ઓર્ડર વિગત</h2></div>
      <div class="stack">
        <!-- Order summary -->
        <div class="sum">
          <div id="sumRows"></div>
          <div class="row total"><span>Total:</span><span id="sumTotal">₹0</span></div>
        </div>

        <!-- Product selection -->
        <form id="productForm" onsubmit="event.preventDefault(); addProduct();">
          <label>Select Product / ઉત્પાદન પસંદ કરો *</label>
          <div class="tabs" role="tablist" aria-label="Products">
            <button class="tab" role="tab" data-prod="Papad" aria-selected="true">Papad</button>
            <button class="tab" role="tab" data-prod="Mathiya" aria-selected="false">Mathiya</button>
            <button class="tab" role="tab" data-prod="Chorafali" aria-selected="false">Chorafali</button>
          </div>
          <div class="subtabs" role="tablist" aria-label="Weight">
            <button class="pill" role="tab" data-weight="500" aria-selected="true">500 gms</button>
            <button class="pill" role="tab" data-weight="1000" aria-selected="false">1 kg</button>
          </div>
          <div class="qty">
            <label for="qty" style="font-weight:700;color:#334155">Quantity</label>
            <button type="button" id="decQty">−</button>
            <input id="qty" type="number" min="1" value="1" style="width:80px;text-align:center" />
            <button type="button" id="incQty">＋</button>
            <div class="priceShow" id="livePrice">₹0</div>
          </div>
          <div class="cta"><button class="btn primary" type="submit">Add Product</button></div>
        </form>

        <!-- Customer Form -->
        <form id="orderForm" onsubmit="event.preventDefault(); placeOrder();">
          <div>
            <label>Full Name / પૂરૂં નામ *</label>
            <input id="name" placeholder="Enter your full name" required />
          </div>
          <div style="margin-top:10px">
            <label>Phone Number / ફોન નંબર *</label>
            <input id="phone" placeholder="10-digit mobile number" maxlength="10" inputmode="numeric" required />
          </div>
          <div style="margin-top:10px">
            <label>Delivery Address / ડિલિવરી સરનામું *</label>
            <textarea id="addr" placeholder="Enter complete address with landmarks" required></textarea>
          </div>
          <div class="fg" style="margin-top:10px">
            <div>
              <label>City / શહેર *</label>
              <input id="city" placeholder="City name" required />
            </div>
            <div>
              <label>Pincode / પિનકોડ *</label>
              <input id="pin" placeholder="6-digit pincode" maxlength="6" inputmode="numeric" required />
            </div>
          </div>

          <div class="call">
            <strong>Order Process:</strong>
            <ul>
              <li>Order details will be sent to our WhatsApp</li>
              <li>You’ll receive order confirmation on WhatsApp</li>
              <li>We’ll contact you for delivery confirmation</li>
              <li>Pay via UPI (preferred)</li>
            </ul>
          </div>

          <div class="cta"><button class="btn primary" type="submit">Place Order via WhatsApp</button></div>
        </form>
      </div>
    </div>
  </main>

  <footer>© <span id="yr"></span> PapadSale</footer>

  <div id="ok" class="modal" role="dialog" aria-modal="true" aria-label="Order placed">
    <div class="mc">
      <div class="tick">✓</div>
      <h3 style="margin:6px 0 0 0">Thank you!</h3>
      <p style="color:#475569">Your order was sent on WhatsApp. We’ll confirm shortly.</p>
      <button class="btn" onclick="document.getElementById('ok').classList.remove('show')">Close</button>
    </div>
  </div>

  <script>
    // ------- Data & helpers
    const PRICE = { Papad:{500:70,1000:130}, Mathiya:{500:150,1000:280}, Chorafali:{500:150,1000:280} };
    let currentProd = 'Papad';
    let currentWeight = 500;
    let CART = [];
    const INRF = new Intl.NumberFormat('en-IN');
    const money = n => '₹' + INRF.format(n);

    // ------- UI helpers
    function updateLivePrice(){
      const qty = parseInt(document.getElementById('qty').value)||1;
      const p = (PRICE[currentProd]||{})[currentWeight]||0;
      const total = p * qty;
      const lp = document.getElementById('livePrice'); if(lp) lp.textContent = money(total);
    }

    const sumRows = document.getElementById('sumRows');
    const sumTotal = document.getElementById('sumTotal');
    function renderSummary(){
      if(!sumRows || !sumTotal) return;
      let t=0; sumRows.innerHTML='';
      CART.forEach(it=>{
        t += it.price*it.qty;
        const r=document.createElement('div');
        r.className='row';
        r.innerHTML = `<span>${it.name} (${it.weight}g) × ${it.qty}</span><span>${money(it.price*it.qty)}</span>`;
        sumRows.appendChild(r);
      });
      sumTotal.textContent = money(t);
    }

    // ------- Actions
    function addProduct(){
      const qty = parseInt(document.getElementById('qty').value)||1;
      const price = (PRICE[currentProd]||{})[currentWeight]||0;
      CART.push({ name: currentProd, weight: currentWeight, qty, price });
      renderSummary();
      updateLivePrice();
    }

    function validPhone(p){ return /^[6-9]\d{9}$/.test(p); }

    function placeOrder(){
      const n=document.getElementById('name').value.trim();
      const p=document.getElementById('phone').value.trim();
      const a=document.getElementById('addr').value.trim();
      const c=document.getElementById('city').value.trim();
      const pin=document.getElementById('pin').value.trim();
      if(!validPhone(p)){ alert('Enter a valid 10-digit mobile number'); return; }

      const lines=[];
      lines.push('*PapadSale – New Order*');
      CART.forEach(it=> lines.push(`• ${it.name} ${it.weight}g × ${it.qty}`));
      lines.push(`Total: ${sumTotal.textContent}`); lines.push('');
      lines.push(`Name: ${n}`);
      lines.push(`Phone: +91 ${p}`);
      lines.push('Address:');
      lines.push(`  - ${a}`);
      lines.push(`  - City: ${c}`);
      lines.push(`  - PIN: ${pin}`);
      lines.push('Payment: UPI');

      const txt = encodeURIComponent(lines.join('\n'));
      const wa = `https://wa.me/919978113276?text=${txt}`;
      window.open(wa,'_blank');
      document.getElementById('ok').classList.add('show');
    }

    // ------- Wiring (tabs, qty, init)
    document.getElementById('yr').textContent=new Date().getFullYear();
    document.querySelectorAll('.tab').forEach(btn=>btn.addEventListener('click',()=>{
      document.querySelectorAll('.tab').forEach(b=>b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true'); currentProd=btn.dataset.prod; updateLivePrice();
    }));
    document.querySelectorAll('.pill').forEach(btn=>btn.addEventListener('click',()=>{
      document.querySelectorAll('.pill').forEach(b=>b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true'); currentWeight=parseInt(btn.dataset.weight,10); updateLivePrice();
    }));
    document.getElementById('incQty').addEventListener('click',()=>{ const q=document.getElementById('qty'); q.value=(parseInt(q.value)||1)+1; updateLivePrice(); });
    document.getElementById('decQty').addEventListener('click',()=>{ const q=document.getElementById('qty'); q.value=Math.max(1,(parseInt(q.value)||1)-1); updateLivePrice(); });
    document.getElementById('qty').addEventListener('input', updateLivePrice);

    // Smoke tests
    (function tests(){
      console.assert(typeof addProduct === 'function','addProduct must be defined');
      console.assert(PRICE.Papad[500]===70 && PRICE.Mathiya[1000]===280,'Price map sanity');
    })();

    renderSummary();
    updateLivePrice();
  </script>
</body>
</html>
